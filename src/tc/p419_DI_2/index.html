<html>
<head>
    <title>NimForK</title>


<link rel="stylesheet" href="../my_tc.css">

</head>
<body>
<h1><a href="http://community.topcoder.com/tc?module=ProblemDetail&amp;rd=13510&amp;pm=10085">NimForK</a></h1>

<p><em>Single Round Match 419 Round 1 - Division I, Level Two</em></p>

<h2>Statement</h2>

<p>The game of NimForK is played as follows.  There are <em>k</em> players sitting in a circle numbered 1 through <em>k</em> in clockwise order.  Starting with player 1, the players take turns making moves in clockwise order.  In the center of the circle, there is a pile that initially contains <em>n</em> stones.</p>

<p>When a player takes a turn, he must remove some number of stones from the pile.  The number of stones he is allowed to take is dependent on the size of the pile.  You are given a String[] <em>moves</em>, where the i-th element (1-indexed) is a space separated list of the number of stones that can be removed when the pile contains i stones.  For example, if there are currently 3 stones in the pile, and <em>moves</em>[3] is "1 3", then the player can remove either 1 stone or 3 stones from the pile.  The player who takes the last stone wins.</p>

<p>Each player uses the following strategy to determine how many stones he will remove during his turn:</p>

<p>If there is a move that ensures he will win regardless of how the other players move for the rest of the game, he will make that move.  If there are several such moves, he will randomly choose one of them with equal probability.  In other words, pretend that the other players are not following the strategy described here, and that it's possible for them to make any valid moves during their turns.  If there is a move that will guarantee him to win in that scenario, he will make that move.
If there is no such move, then assuming that the other players are following this same strategy,  he will make a move that gives him a non-zero chance of winning.  If there are several such moves, he will randomly choose one of them with equal probability.
If neither of the above moves are possible, he will randomly choose any valid move with equal probability.</p>

<p>If there are no valid moves possible during a player's turn, but there are still stones left in the pile, the game ends and nobody wins.</p>

<p>Return a int[] containing all the players who have a non-zero chance of winning the game.  The int[] must be sorted in ascending order.</p>

<h2>Definitions</h2>

<ul>
<li><em>Class</em>: <code>NimForK</code></li>
<li><em>Method</em>: <code>winners</code></li>
<li><em>Parameters</em>: <code>int, int, String[]</code></li>
<li><em>Returns</em>: <code>int[]</code></li>
<li><em>Method signature</em>: <code>int[] winners(int n, int k, String[] moves)</code></li>
</ul>


<h2>Constraints</h2>

<ul>
<li><em>n</em> will be between 1 and 50, inclusive.</li>
<li><em>k</em> will be between 2 and 20, inclusive.</li>
<li><em>moves</em> will contain exactly n elements.</li>
<li>Each element of <em>moves</em> will have length between 0 and 50, inclusive.</li>
<li>Each element of <em>moves</em> will contain a space separated list of integers.</li>
<li>Each integer in <em>moves</em>[i] will be between 1 and i + 1, inclusive.</li>
<li>All integers in <em>moves</em>[i] will be distinct.</li>
</ul>


<h2>Examples</h2>

<h3>Example 1</h3>

<h4>Input</h4>

<p><c>8,<br />2,<br />["1", "1 2", "1 2 3", "1 2 3", "1 2 3", "1 2 3", "1 2 3", "1 2 3"]</c></p>

<h4>Output</h4>

<p><c>[2 ]</c></p>

<h4>Reason</h4>

<p>This is a standard variation of nim where each player is allowed to take 1, 2 or 3 stones. In a game for two players the first player wins if and only if the number of stones in the initial pile is not divisible by 4.</p>

<h3>Example 2</h3>

<h4>Input</h4>

<p><c>7,<br />2,<br />["1", "1 2", "1 2 3", "1 2 3", "1 2 3", "1 2 3", "1 2 3"]</c></p>

<h4>Output</h4>

<p><c>[1 ]</c></p>

<h4>Reason</h4>

<p>Same as the previous example. Here 7 is not divisible by 4, so the first player wins.</p>

<h3>Example 3</h3>

<h4>Input</h4>

<p><c>5,<br />3,<br />["1", "1 2", "1 2 3", "1 2 3", "1 2 3"]</c></p>

<h4>Output</h4>

<p><c>[2, 3 ]</c></p>

<h4>Reason</h4>

<p>When there are three players and five stones, the first player cannot win. However, he decides who would win by taking either 1 stone (in this case the third player would win) or 2 or 3 stones (in this case the second player would win).</p>

<h3>Example 4</h3>

<h4>Input</h4>

<p><c>6,<br />3,<br />["1", "1 2", "1 2 3", "1 2 3", "1 2 3", "1 2 3"]</c></p>

<h4>Output</h4>

<p><c>[1, 3 ]</c></p>

<h4>Reason</h4>

<p>Here the first player cannot force his victory. His options are: take 1 stone - in this case the second player would decide whether the third player, or the first player would win (see previous example); take 2 stones - in this case the third player would win; take 3 stones - in this case the second player would win. He chooses the first option because in this case he can win with non-zero probability.</p>

<h3>Example 5</h3>

<h4>Input</h4>

<p><c>1,<br />20,<br />[""]</c></p>

<h4>Output</h4>

<p><c>[ ]</c></p>

<h4>Reason</h4>

<p>A delicate case. No player can make a move, so nobody can take the last stone. Therefore nobody can win.</p>

</body>
</html>